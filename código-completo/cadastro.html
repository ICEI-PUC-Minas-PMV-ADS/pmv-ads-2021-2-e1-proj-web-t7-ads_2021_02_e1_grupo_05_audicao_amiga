<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <link rel="stylesheet" href="css/cadastro.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="icon/ico" href="img/icone/icon.ico">
    <link rel="stylesheet" href="css/novo.css">
</head>
<body>

    <div class="circle_c">
        <div class="circle"></div>
    </div>

    <div class="h-100p flex-wrap flex">
       
        <div class="flex-2p flex items-center text-center order-1">
            <div class="p-2">
                <img class="w-300" src="img/fundo/Grupo25.png" >
                <p class="font-size-2p text-center">Todo cidadão tem o direito de acessar conteúdos veiculados pelos meios audiovisuais em suas diversas plataformas</p>
            </div>
        </div>
        
        <main class="flex-1 order-2">
            <h1>Crie uma conta</h1>
        
            <form class="grid">

                <label for="name"><input class="bg-gray border-none color-white" autocomplete="off" type="text" id="f_name" name="name" placeholder="Nome"></label>
                <label for="Sobrenome"><input class="bg-gray border-none color-white" autocomplete="off" type="text" id="f_sobrenome" name="Sobrenome" placeholder="Sobrenome"></label>
                <label for="email"><input class="bg-gray border-none color-white" autocomplete="off" type="email" id="f_email" name="email" placeholder="E-mail"></label>
                <label for="password"><input class="bg-gray border-none color-white" autocomplete="off" type="password" id="f_password" name="password" placeholder="Senha"></label>

                <label>
                    <input type="date" class="form-control border-none bg-gray" id="inputData" required="">
                </label>
        
                <input class="inline-block w-200 m-auto bt-1 px-2 py-1 inline-block" value="Cadastre-se" id="bt_cadastrar">
                <a href="login.html" class="m-1 inline-block w-200 m-auto bt-2 px-2 py-1 inline-block">Voltar para login</a>

            </form>
        
        </main>
    </div>

</body>
</html> 

<script>

    if(localStorage.dados == undefined)
            localStorage.setItem('dados','[]')

    // localStorage.setItem('dados',JSON.stringify(usuarios))

    function salvar(nome,sobrenome,email,senha,nascimento){



        if(localStorage.dados == undefined){

            usuarios = [
                {
                    login:"jose",
                    password:"jose"
                }
            ]

            localStorage.setItem('dados',JSON.stringify(usuarios))
        }


        obj = {
            nome:nome,
            sobrenome:sobrenome,
            email:email,
            senha:senha,
            nascimento:nascimento
        }
        j = JSON.parse(localStorage.dados)
        j.push(obj)

            localStorage.setItem('dados',JSON.stringify(j))
        
    }
    
    // salvar('ok','sobre','ok@ok.com','1234','14/23/23')

    function cadastrar(){
        
        nome = f_name.value,
        sobrenome = f_sobrenome.value,
        email = f_email.value,
        pass = f_password.value,
        data = inputData.value

        
        salvar(nome,sobrenome,email,pass,data)
        
    }

    bt_cadastrar.onclick = function(e){

        if(localStorage.dados == undefined)
            localStorage.setItem('dados','[]')
        
        if(!JSON.parse(localStorage.dados).find(e=>e.email==f_email.value)){
            alert('cadastrado')
            cadastrar()
            window.location.href = "login.html"
        }else{
            alert('usuário já existe')
        }
        
    }

</script>